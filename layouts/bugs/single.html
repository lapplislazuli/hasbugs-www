{{ define "main" }}

{{/* We iterate over all datapoints, and if the site's id matches on in datapoinst we continue */}}

  {{ $param_id:=.Params.id}}
  {{ range .Site.Data.bugs}}
    {{ if (eq .id $param_id) }}
    {{ $faulthashshort:=(substr .faultcommit 0 8 )}}
    {{ $fixhashshort:=(substr .fixcommit 0 8 )}}
    {{ $repourl:=(print "https://www." (replace (substr .repositoryurl 4) ":" "/"))}}
    {{ $faulturl:=(print $repourl "/commit/" .faultcommit)}}
    {{ $fixurl:=(print $repourl "/commit/" .fixcommit)}}
      <section class="section blog-single py-5">
        <div class="container">
          <div class="row justify-content-center pb-5">
            <div id="title-and-description" class="flex-column" style="width:60%">
              <div class="col-12">
                {{ with .id }}
                  <h2 class="display-1 fw-bold text-left text-primary pb-3">{{ . }}</h2>
                {{ end }}
                {{ with .description }}
                  <p class="text-black-61 text-center pb-3">{{ . }}</p>
                {{ end }}
              </div>
            </div>
            <div id="infobox"  class="flex-column"style="width:30%">
              {{partial "utilities/bug-infobox.html" .}} 
            </div>
          </div>
          <div class="row pb-5">
            <div class="col-12 d-flex justify-content-center">
              <div class="blog-content fs-5">
    
                <p>Faults<a class="btn btn-outline-primary px-4 my-1 ms-xl-4" href="{{$faulturl}}">{{$faulthashshort}}<span class="ms-2">{{ partial "icons/arrow-right.html" }}</span></a></p>
                {{partial "utilities/code-block.html" .faultlocations}}
    
                <p>Fixes<a class="btn btn-outline-primary px-4 my-1 ms-xl-4" href="{{$fixurl}}">{{$fixhashshort}}<span class="ms-2">{{ partial "icons/arrow-right.html" }}</span></a></p>
                {{partial "utilities/code-block.html" .fixlocations}}

              </div>
            </div>
          </div>
          
          </div>
        </div>
      </section>
    {{ end }}
  {{ else }}
    Troubles loading datapoints. 
  {{ end }}

  <div class="next-post">
    {{ if .NextPage }}
    <a class="link-reverse" href="{{ .NextPage.Permalink }}?ref=footer">« {{ .NextPage.Title | truncate 50 "..." }}</a>
    {{ end }}
  </div>
  <div class="previous-post">
    {{ if .PrevPage }}
    <a class="link-reverse" href="{{ .PrevPage.Permalink }}?ref=footer">{{ .PrevPage.Title | truncate 50 "..."}} »</a>
    {{ end }}
  </div>
  <div class="row pb-5">

{{ end }}